<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    const id = window.location.hash.replace("#", "") || "0";
    const deepLink = `myapp://user/${id}`;
    const fallback = "https://google.com";

    let fallbackTimeout;

    // Cancel fallback if user switches away (e.g. app opens)
    document.addEventListener('visibilitychange', () => {
      if (document.visibilityState === 'hidden') {
        clearTimeout(fallbackTimeout);
      }
    });

    // Try opening the app
    window.location.replace(deepLink);

    // Fallback after 1.5s only if app didn't open
    fallbackTimeout = setTimeout(() => {
      window.location.href = fallback;
    }, 1500);
  </script>
</head>
<body>
  <p>Opening your appâ€¦</p>
</body>
</html>
